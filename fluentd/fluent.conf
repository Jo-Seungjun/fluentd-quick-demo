<system>
  log_level debug
</system>

<source>
  @type  forward
  @id    input1
  @label @mainstream
  port  24224
</source>

<label @mainstream>
  <filter **>
    @type parser
    key_name log
    <parse>
      @type       regexp
      expression  ^(?<time>....-..-.. ..:..:..,...*) (?<name>[^ ]*) (?<levelname>[^ ]*) (?<message>.*)$
      time_key    time
      time_format %Y-%m-%d %H:%M:%S,%L
    </parse>
  </filter>

  <match docker.log.*>
    @type influxdb2
    @log_level debug
    url http://192.168.219.124:8086
    token j-ctE6B5ikx1oAsAFgXSVvb8VmfgXXmii7cdm0R-zhQyKSNGlaHecSIOqQs25BKylVyU-TwqWrS4ebQMvYW5XA==
    use_ssl false
    verify_mode "{OpenSSL::SSL::VERIFY_NONE}"

    bucket tempbucket
    org temporg
    measurement tempmeasurement

    tag_keys ["container_name"]
    tag_fluentd true
    field_keys ["name","levelname","message"]
    time_key time
  </match>
</label>
